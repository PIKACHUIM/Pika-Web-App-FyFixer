global.webpackJsonp([1],{"5ALE":function(e,t,n){"use strict";var a=(n("d2gY"),n("l3C9"));t.a={props:[],data:function(){return{show:!1,announcements:[]}},onLoad:function(){var e=this;a.a.getAnnounce().then(function(t){200==t.code&&(e.announcements=t.data,e.show=!0)})},methods:{openAnnounce:function(e){this.announcements[e].text&&wx.showModal({title:this.announcements[e].title,content:this.announcements[e].text,showCancel:!1})}}}},"9/IZ":function(e,t,n){"use strict";var a=n("Xxa5"),i=n.n(a),s=n("exGp"),c=n.n(s),o=n("woOf"),l=n.n(o),u=n("3P4D"),r=n("y1bk"),d=n("NI1g"),v=n("RDLv"),p=n("b6pu"),f=n("Bo+9"),w=(n("0qfX"),n("UosE")),h=n("l3C9");t.a={data:function(){return{fyData:w.a.data,apiData:h.a.data,isAvailable:!1,errorText:"",isPanel1Focus:!1,isPanel2Focus:!1,devices:[],sendData:{name:null,detail:null,selectDevice:null,newDeviceBrand:null,newDeviceModel:null,newDeviceDate:null}}},components:{singlebtn:u.a,inputbox:r.a,textareabox:d.a,userbox:v.a,announcebox:p.a,appfooter:f.a},methods:{refreshStatus:function(e){var t=this;h.a.getAvailable().then(function(e){e.code>=500?t.errorText="抱歉，系统正忙，请稍后再试":e.data.count<=0?t.errorText=e.data.text:t.isAvailable=!0})},nameInput:function(e){this.sendData.name=e},textareaFocus:function(e){this.isPanel2Focus=!0},textareaBlur:function(e){this.isPanel2Focus=!1},textareaInput:function(e){this.sendData.detail=e},selectDevice:function(e){this.sendData.selectDevice=e.target.value},panel1Focus:function(e){this.isPanel1Focus=!0},panel1Blur:function(e){this.isPanel1Focus=!1},brandInput:function(e){this.sendData.newDeviceBrand=e},modelInput:function(e){this.sendData.newDeviceModel=e},dateChange:function(e){this.sendData.newDeviceDate=e.target.value},submit:function(e){var t=this,n=this;n.isFinish&&(n.apiData.new?h.a.newUser(this.sendData).then(function(e){h.a.newTicket(t.sendData).then(function(e){w.a.updateInfo(l()(n.fyData.info,{name:t.sendData.name})),n.apiData.new=!1,wx.reLaunch({url:"../list/main"})})}).catch(function(e){wx.showToast({title:"提交失败("+e+")",icon:"none",duration:2e3})}):h.a.newTicket(this.sendData).then(function(e){wx.reLaunch({url:"../list/main"})}).catch(function(e){wx.showToast({title:"提交失败("+e+")",icon:"none",duration:2e3})}))}},computed:{isFinish:function(){if(this.apiData.new&&(null==this.sendData.name||""==this.sendData.name||"null"==this.sendData.name))return!1;if(null==this.sendData.detail||""==this.sendData.detail)return!1;if(null==this.sendData.selectDevice)return!1;if(0==this.sendData.selectDevice){if(null==this.sendData.newDeviceBrand||""==this.sendData.newDeviceBrand)return!1;if(null==this.sendData.newDeviceModel||""==this.sendData.newDeviceModel)return!1;if(null==this.sendData.newDeviceDate||""==this.sendData.newDeviceDate)return!1}return!0}},onLoad:function(){var e=this;w.a.init(),h.a.init(),h.a.getActiveTickets().then(function(e){200==e.code&&e.data>0&&wx.reLaunch({url:"/pages/tickets/list/main"})}),e.refreshStatus(),h.a.getDevices().then(function(t){e.devices=t}).catch(function(e){wx.showToast({title:"获取设备信息失败("+e+")",icon:"none",duration:2e3})})},onPullDownRefresh:function(){this.refreshStatus(),wx.stopPullDownRefresh()},onShow:function(){},created:function(){var e=this;return c()(i.a.mark(function t(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}))()}}},EpDu:function(e,t){},NMDK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("5nAL"),i=n.n(a),s=n("hgpR");new i.a(s.a).$mount(),t.default={config:{enablePullDownRefresh:!0}}},b6pu:function(e,t,n){"use strict";function a(e){n("EpDu")}var i=n("5ALE"),s=n("ex0+"),c=n("ybqe"),o=a,l=c(i.a,s.a,o,null,null);t.a=l.exports},"ex0+":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("view",{staticClass:"weui-cells weui-panel"},[n("view",{staticClass:"weui-btn-area inline"},[n("view",{staticStyle:{width:"100%"}},[n("view",{staticClass:"weui-label"},[e._v("公告 ("+e._s(e.announcements.length)+")")]),e._v(" "),n("view",{staticClass:"cell-text",staticStyle:{"padding-top":"5px"}},[n("swiper",{staticStyle:{height:"70rpx"},attrs:{autoplay:"true",interval:"5000",duration:"500",vertical:"true"}},e._l(e.announcements,function(t,a){return n("block",{key:a},[n("swiper-item",{attrs:{mpcomid:"0-"+a}},[n("view",{staticStyle:{color:"#65b2e9"},attrs:{eventid:"0-"+a},on:{click:function(t){e.openAnnounce(a)}}},[e._v(e._s(t.title))])])],1)}))],1)])])]):e._e()},i=[],s={render:a,staticRenderFns:i};t.a=s},f8jy:function(e,t){},hgpR:function(e,t,n){"use strict";function a(e){n("f8jy")}var i=n("9/IZ"),s=n("qAO3"),c=n("ybqe"),o=a,l=c(i.a,s.a,o,"data-v-4a319b7f",null);t.a=l.exports},qAO3:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{overflow:"hidden"}},[n("userbox",{attrs:{disabled:!e.apiData.new,usertype:e.apiData.basic.staff_id>0?2:0,functype:"0",indata:e.fyData.info,eventid:"0",mpcomid:"0"},on:{input:e.nameInput}}),e._v(" "),n("announcebox",{attrs:{mpcomid:"1"}}),e._v(" "),e.isAvailable?n("div",[n("view",{staticClass:"weui-cells weui-panel",attrs:{name:"selectDevice"}},[n("view",{staticClass:"weui-btn-area"},[n("view",{staticClass:"weui-label"},[e._v("设备")]),e._v(" "),n("radio-group",{staticClass:"radio-group",attrs:{eventid:"1",mpcomid:"2"},on:{change:e.selectDevice}},[e._l(e.devices,function(t,a){return n("label",{key:t.computer_id,staticClass:"radio"},[n("radio",{attrs:{color:"#69b4ea",value:t.computer_id}}),e._v(" "+e._s(t.brand)+" "+e._s(t.model)+"\n            ")],1)}),e._v(" "),n("label",{staticClass:"radio"},[n("radio",{attrs:{color:"#69b4ea",value:"0"}}),e._v(" 新增\n            ")],1)],2)],1)]),e._v(" "),0==e.sendData.selectDevice?n("view",{staticClass:"weui-cells weui-panel",class:{active:e.isPanel1Focus}},[n("inputbox",{attrs:{label:"品牌",name:"newDeviceBrand",eventid:"2",mpcomid:"3"},on:{focus:e.panel1Focus,blur:e.panel1Blur,input:e.brandInput}}),e._v(" "),n("inputbox",{attrs:{label:"型号",name:"newDeviceModel",eventid:"3",mpcomid:"4"},on:{focus:e.panel1Focus,blur:e.panel1Blur,input:e.modelInput}}),e._v(" "),n("view",{staticClass:"weui-btn-area",staticStyle:{display:"flex"}},[n("view",{staticStyle:{width:"100%"}},[n("view",{staticClass:"weui-label"},[e._v("购买时间")]),e._v(" "),n("picker",{attrs:{mode:"date",fields:"month",start:"2000-01",end:"2020-09",name:"newDeviceDate",eventid:"4"},on:{change:e.dateChange}},[n("view",{staticClass:"weui-cell_input weui-input"},[e._v(e._s(null==e.sendData.newDeviceDate?"":e.sendData.newDeviceDate))])])],1),e._v(" "),n("view",{staticStyle:{width:"150%",padding:"37px 0 0 0",color:"#b2b2b2","text-align":"right","font-size":"30rpx"}},[e._v("拆机会失去原厂保修")])])],1):e._e(),e._v(" "),n("view",{staticClass:"weui-cells weui-panel",class:{active:e.isPanel2Focus}},[n("textareabox",{attrs:{label:"故障描述",name:"username",placeholder:"简单描述你遇到的问题",eventid:"5",mpcomid:"5"},on:{focus:e.textareaFocus,blur:e.textareaBlur,input:e.textareaInput}})],1),e._v(" "),n("singlebtn",{attrs:{disabled:!e.isFinish,text:"立即报修",size:"default",type:"primary",eventid:"6",mpcomid:"6"},on:{submit:e.submit}})],1):n("view",{staticClass:"weui-cells weui-panel",staticStyle:{padding:"40rpx",color:"#a0a0a0"}},[e._v(e._s(e.errorText))]),e._v(" "),n("appfooter",{attrs:{mpcomid:"7"}}),e._v(" "),n("view",{staticStyle:{height:"10px"}})],1)},i=[],s={render:a,staticRenderFns:i};t.a=s}},["NMDK"]);