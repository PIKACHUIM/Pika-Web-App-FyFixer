global.webpackJsonp([3],{"58+T":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("5nAL"),s=a.n(i),n=a("m1f9");new s.a(n.a).$mount(),e.default={config:{navigationBarTitleText:"维修单",enablePullDownRefresh:!0}}},AUoD:function(t,e,a){"use strict";var i=a("UosE"),s=a("l3C9"),n=a("3P4D"),l=a("RDLv"),o=a("Bo+9");e.a={data:function(){return{fyData:i.a.data,apiData:s.a.data,tickets:[],status:["等待分配","等待确认","已取消","正在维修","已完成","重新分配"],statusColor:["blue","blue","gray","blue","black","blue"],lastUpdate:null}},components:{userbox:l.a,appfooter:o.a,singlebtn:n.a},methods:{login:function(){wx.reLaunch({url:"/pages/login/main"})},admin:function(){wx.navigateTo({url:"/pages/admin/main"})},jumpToDetail:function(t){wx.navigateTo({url:"../detail/main?number="+this.tickets[t].number})}},computed:{staffText:function(){var t=[0,0,0,0,0,0];for(var e in this.tickets)t[this.tickets[e].status]++;return t[3]+" "+this.status[3]+" "+t[4]+" "+this.status[4]},isAdmin:function(){return this.fyData.info.permissions.includes("10")}},onLoad:function(){i.a.init(),s.a.init()},onPullDownRefresh:function(){var t=this;t.lastUpdate=new Date,s.a.getTickets().then(function(e){200==e.code?t.tickets=e.data:401==e.code&&(i.a.logout(),s.a.logout(),wx.showModal({content:"登录已失效，请重新登录",showCancel:!1,success:function(e){t.login()}})),wx.stopPullDownRefresh()})},onShow:function(){(null==this.lastUpdate||this.lastUpdate.getTime()-(new Date).getTime()>6e4)&&this.fyData.login&&wx.startPullDownRefresh()}}},BqmP:function(t,e){},EnKD:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("userbox",{attrs:{disabled:!0,usertype:t.apiData.basic.staff_id>0?2:0,functype:"1",indata:t.fyData.info,text:t.staffText,mpcomid:"0"}}),t._v(" "),t.isAdmin?a("singlebtn",{attrs:{text:"管理控制台",size:"default",type:"primary",eventid:"0",mpcomid:"1"},on:{submit:function(e){t.admin()}}}):t._e(),t._v(" "),t._l(t.tickets,function(e,i){return a("view",{staticClass:"weui-cells weui-panel",attrs:{eventid:"1-"+i},on:{click:function(e){t.jumpToDetail(i)}}},[a("view",{staticClass:"weui-btn-area"},[a("view",{staticClass:"cell-text",class:t.statusColor[e.status],staticStyle:{"line-height":"1","min-height":"25px"}},[t._v(t._s(t.status[e.status]))]),t._v(" "),a("view",{staticClass:"weui-label",staticStyle:{color:"#e0e0e0"}},[t._v(t._s(e.time))])]),t._v(" "),e.name?a("view",{staticClass:"weui-btn-area"},[a("view",{staticClass:"weui-label"},[t._v(t._s(t.apiData.basic.staff_id>0?"机主":"技术员"))]),t._v(" "),a("view",{staticClass:"cell-text"},[t._v(t._s(e.name)+" "+t._s(e.phone))])]):t._e(),t._v(" "),a("view",{staticClass:"weui-btn-area"},[a("view",{staticClass:"weui-label"},[t._v("设备")]),t._v(" "),a("view",{staticClass:"cell-text"},[t._v(t._s(e.computer.brand)+" "+t._s(e.computer.model))])])])}),t._v(" "),a("appfooter",{attrs:{mpcomid:"2"}}),t._v(" "),a("view",{staticStyle:{height:"30px"}})],2)},s=[],n={render:i,staticRenderFns:s};e.a=n},m1f9:function(t,e,a){"use strict";function i(t){a("BqmP")}var s=a("AUoD"),n=a("EnKD"),l=a("ybqe"),o=i,u=l(s.a,n.a,o,null,null);e.a=u.exports}},["58+T"]);