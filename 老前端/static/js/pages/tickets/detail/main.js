global.webpackJsonp([4],{F6bJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("5nAL"),s=a.n(i),c=a("rlDG");new s.a(c.a).$mount(),e.default={config:{navigationBarTitleText:"报修单详情"}}},Rhws:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[null!=t.ticketData?a("view",{staticClass:"weui-cells weui-panel"},[a("view",{staticClass:"weui-btn-area"},[a("view",{staticClass:"cell-text",class:t.statusColor[t.ticketData.basic.status],staticStyle:{"line-height":"1","min-height":"25px"}},[t._v(t._s(t.status[t.ticketData.basic.status]))]),t._v(" "),a("view",{staticClass:"weui-label"},[t._v(t._s(t.ticketData.basic.time))])]),t._v(" "),a("view",{staticClass:"weui-btn-area"},[a("view",{staticClass:"weui-label"},[t._v("单号")]),t._v(" "),a("view",{staticClass:"cell-text"},[t._v(t._s(t.ticketId))])]),t._v(" "),t.ticketData.staff?a("view",{staticClass:"weui-btn-area"},[a("view",{staticClass:"weui-label"},[t._v(t._s(t.repairData.basic.staff_id>0?"机主":"技术员"))]),t._v(" "),a("view",{staticClass:"cell-text"},[t._v("\n        "+t._s(t.subject.name)+" "+t._s(t.repairData.basic.staff_id>0&&1==t.ticketData.basic.vip?"(会员)":"")+"\n      ")])]):t._e(),t._v(" "),t.ticketData.staff?a("view",{staticClass:"weui-btn-area inline"},[a("view",{staticStyle:{width:"100%"}},[a("view",{staticClass:"weui-label"},[t._v("联系方式")]),t._v(" "),a("view",{staticClass:"cell-text"},[t._v(t._s(t.subject.phone))])]),t._v(" "),a("view",{staticClass:"weui-btn-area inline-btn",staticStyle:{height:"23px","margin-top":"3px"}},[a("button",{staticClass:"weui-btn inline",attrs:{eventid:"0"},on:{click:t.handlePhoneClick}},[t._v("复制")])],1)]):t._e(),t._v(" "),a("view",{staticClass:"weui-btn-area"},[a("view",{staticClass:"weui-label"},[t._v("设备")]),t._v(" "),a("view",{staticClass:"cell-text"},[t._v(t._s(t.ticketData.computer.brand)+" "+t._s(t.ticketData.computer.model))])]),t._v(" "),a("view",{staticClass:"weui-btn-area"},[a("view",{staticClass:"weui-label"},[t._v("购买日期")]),t._v(" "),a("view",{staticClass:"cell-text"},[t._v(t._s(t.ticketData.computer.buy_time))])]),t._v(" "),a("view",{staticClass:"weui-btn-area"},[a("view",{staticClass:"weui-label"},[t._v("问题详情")]),t._v(" "),a("view",{staticClass:"cell-text",staticStyle:{"line-height":"1.5","padding-top":"22rpx"}},[t._v(t._s(t.ticketData.extend.description))])])]):t._e(),t._v(" "),null!=t.ticketData?a("view",[t.repairData.basic.staff_id<0&&t.ticketData.basic.status<3?a("singlebtn",{attrs:{text:"取消报修",type:"warn",disabled:2==t.ticketData.basic.status,eventid:"1",mpcomid:"0"},on:{submit:t.handleCancel}}):t._e(),t._v(" "),t.ticketData.basic.status>=3?a("singlebtn",{attrs:{text:"确认完成",type:"primary",disabled:4==t.ticketData.basic.status,eventid:"2",mpcomid:"1"},on:{submit:t.handleFinish}}):t._e()],1):t._e(),t._v(" "),a("appfooter",{attrs:{mpcomid:"2"}}),t._v(" "),a("view",{staticStyle:{height:"30px"}})],1)},s=[],c={render:i,staticRenderFns:s};e.a=c},kysh:function(t,e){},rlDG:function(t,e,a){"use strict";function i(t){a("kysh")}var s=a("wMh8"),c=a("Rhws"),n=a("ybqe"),l=i,o=n(s.a,c.a,l,null,null);e.a=o.exports},wMh8:function(t,e,a){"use strict";var i=a("l3C9"),s=a("3P4D"),c=a("Bo+9");e.a={components:{singlebtn:s.a,appfooter:c.a},data:function(){return{repairData:i.a.data,ticketId:null,ticketData:null,status:["待分配","待确认","已取消","维修中","已完成","重新分配"],statusColor:["blue","blue","gray","blue","black","blue"]}},methods:{handlePhoneClick:function(){var t=this;wx.showActionSheet({itemList:["复制号码","呼叫"],success:function(e){if(!e.cancel)switch(e.tapIndex){case 0:wx.setClipboardData({data:t.subject.phone});break;case 1:wx.makePhoneCall({phoneNumber:t.subject.phone})}}})},handleAccept:function(){var t=this;i.a.acceptTicket(t.ticketId).then(function(e){200==e.code?t.refresh():wx.showToast({title:"操作失败("+e.code+")",icon:"none",duration:2e3})})},handleCancel:function(){var t=this;wx.showModal({title:"取消维修单",content:"此操作不可逆",confirmText:"删除",confirmColor:"#EA3C16",success:function(e){e.confirm&&i.a.cancelTicket(t.ticketId).then(function(e){200==e.code?t.refresh():wx.showToast({title:"操作失败("+e.code+")",icon:"none",duration:2e3})})}})},handleFinish:function(){var t=this;i.a.finishTicket(t.ticketId).then(function(e){200==e.code?t.refresh():wx.showToast({title:"操作失败("+e.code+")",icon:"none",duration:2e3})})},refresh:function(){var t=this;i.a.getTicketDetail(t.ticketId).then(function(e){200==e.code?(t.$data.ticketData=e.data,console.log(e)):wx.showToast({title:"获取详情失败("+e.code+")",icon:"none",duration:2e3})})}},computed:{subject:function(){return null==this.repairData||null==this.ticketData?{}:this.repairData.basic.staff_id>0?this.ticketData.user:this.ticketData.staff}},created:function(){i.a.init()},onLoad:function(t){this.ticketId=t.number,this.refresh()},onHide:function(){this.ticketData=null}}}},["F6bJ"]);